tschscan.sh

チャンネルスキャンを行うシェルスクリプトです。
13～62、C13～C63、BS01_0～BS23_2、CS2～CS24をrecpt1で4秒間ずつ録画して、
録画できたものをtschputでチャンネル名を取得してnkfで文字コードを変換して
channel.ymlに出力します。

tschputは2秒以上録画されたTSファイルのチャンネル名を表示するコマンドです。
スクランブルの有無（有料放送であるか否かの判別に使えるかと思います）と、
NID（ONID）、TSID、SID、チャンネル名をスペースで区切ってシフトJISで出力を
行います。
チャンネル名の表示に使っているARIB 8単位符号からシフトJISへの変換処理は、
最低限の実装しか行っていないので、正しく表示されない場合があります。

シェルスクリプト内のrecpt1の部分を書き換えることで、他の録画コマンドでも
使えるかと思います。

channel.ymlはMirakurunのチャンネル設定ファイルですが、シェルスクリプト内
のchannel.yml出力部分を書き換えることで、mirakcや他の録画環境でも使えるか
と思います。

tschput.cは下記のようにコンパイルして同じディレクトリに置いてください。

gcc tschput.c -o tschput
strip tschput

WindowsのMinGW等でもコンパイルできるかと思います。

